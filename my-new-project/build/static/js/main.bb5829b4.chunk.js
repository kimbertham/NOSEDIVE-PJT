(this["webpackJsonpmy-new-project"]=this["webpackJsonpmy-new-project"]||[]).push([[0],{35:function(e,t,a){e.exports=a(92)},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),s=a.n(c),l=(a(40),a(41),a(42),a(43),a(44),a(45),a(46),a(47),a(48),a(1)),o=a.n(l),i=a(11),m=a(9),u=a(2),p=a(4),d=a(5),f=a(6),h=a(7),g=a(3),v=a.n(g),b=a(8),E=a(12),N=function(e){window.localStorage.setItem("token",e)},w=function(){return{headers:{Authorization:"Bearer ".concat(k())}}},k=function(){return window.localStorage.getItem("token")},y=function(){return function(){var e=k();if(!e)return!1;var t=e.split(".");return!(t.length<3)&&JSON.parse(window.atob(t[1]))}().sub},x="https://bit.ly/30vhZFs",j={headers:{"x-rapidapi-host":"amazon-product-reviews-keywords.p.rapidapi.com","x-rapidapi-key":"5789c571cbmsh6847871835030fcp18787bjsncd9c94134328"}},O="https://amazon-product-reviews-keywords.p.rapidapi.com/product/search?country=US&keyword=",C=a(16),S=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={rating:0,feedback:"",modal:!1,message:!1,info:!1},e.handleChange=function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({rating:a},Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.post("/api/ratings/".concat(e.props.userProfile,"/"),e.state,w());case 2:e.props.updateProfile(e.props.userProfile,"average"),e.props.updateProfile(e.props.userProfile,"ratings");case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFeedback=function(t){e.setState({feedback:t.target.value})},e.handleModal=function(){e.setState({modal:!e.state.modal})},e.handleinfo=function(){e.setState({info:!e.state.info})},e.showText=function(){e.setState({message:!0}),setTimeout((function(){return e.setState({message:!1})}),1e3)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.modal,a=e.message,n=e.info,c=this.props,s=c.currentUserId,l=c.userProfile,o=c.average;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"feedback-container"},s===l?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{value:o,size:"30px",onChange:this.showText}),r.a.createElement("p",{className:a?"shake-text italic":"display-none"}," \u24d8 You cannot rate yourself")):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{value:this.state.rating,size:"30px",onChange:this.handleChange}),r.a.createElement("div",{className:"center",onClick:this.handleModal},r.a.createElement("button",{className:"button"},"Leave feedback..."))),r.a.createElement("div",{className:t?"center":"display-none"},r.a.createElement("div",{className:"italic",onClick:this.handleinfo}," \u24d8"),r.a.createElement("div",{className:n?"feedback-i":"display-none"},r.a.createElement("div",{onClick:this.handleinfo},"Choose your feedback option first then send it off with your star rating choice",r.a.createElement("p",{className:"absolute right"}," x "))),r.a.createElement("select",{id:"feedback",value:this.state.feedback,onChange:this.handleFeedback},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"Unpleasant Smell"},"Unpleasant Smell"),r.a.createElement("option",{value:"Rude Interaction"},"Rude Interaction"),r.a.createElement("option",{value:"Unattractive"},"Unattractive"),r.a.createElement("option",{value:"Impoverished Vibes"},"Impoverished Vibes"),r.a.createElement("option",{value:"Discriminatory"},"Discriminatory")))))}}]),a}(r.a.Component),_=y(),I=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={following:!1},e.checkFollow=function(){for(var t=e.props.following,a=0;a<t.length;a++)t[a].user_from.id===_?e.setState({following:!0}):e.setState({following:!1})},e.handleFollow=Object(u.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,n=e.state.following?"unfollowing":"following",t.next=4,v.a.post("/api/follow/".concat(n,"/").concat(a,"/"),"",w());case 4:e.setState({following:!e.state.following}),e.props.updateProfile(e.props.userProfile,"follow");case 6:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.checkFollow()}},{key:"render",value:function(){var e=this.state.following,t=this.props.match.params.id;return r.a.createElement("div",{className:_.toString()===t?"display-none":"follow-button-container"},r.a.createElement("button",{onClick:this.handleFollow,className:"button follow-button"},!0===e?"Unfollow":"Follow"))}}]),a}(r.a.Component),D=Object(E.f)(I),P=function(e){var t=e.user,a=e.handleModal,n=e.modal,c=e.updateProfile,s=e.currentUserId,l=t.bio,o=t.average,i=t.follow;return t?r.a.createElement("div",{className:"profile-info"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(l.profile_image?l.profile_image:x,")")},className:"profile-image"}),r.a.createElement("div",{className:"profile-text"},r.a.createElement("div",{className:"center"},r.a.createElement("h1",null," ",l.first_name," ",l.last_name),r.a.createElement(D,{userProfile:l.id,updateProfile:c,following:i.followers})),r.a.createElement("div",{className:"profile-details"},r.a.createElement("h1",null,o?o.toString().slice(0,3):0,r.a.createElement("small",null,o?o.toString().slice(3,5):0)),r.a.createElement("p",null,l.tagline)))),r.a.createElement("div",null,r.a.createElement(S,{userProfile:l.id,average:o,currentUserId:s,updateProfile:c,modal:n,handleModal:a}))):""},U=Object(E.f)((function(e){var t=e.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile-nav dark-border"},r.a.createElement(b.b,{to:"/profile/".concat(t.bio.id,"/bio")},r.a.createElement("div",{className:"nav-field"}," Bio ")),r.a.createElement(b.b,{to:"/profile/".concat(t.bio.id,"/activity")},r.a.createElement("div",{className:"nav-field"}," Activity ")),r.a.createElement(b.b,{to:"/profile/".concat(t.bio.id,"/photos")},r.a.createElement("div",{className:"nav-field"}," Photos ")),r.a.createElement(b.b,{to:"/profile/".concat(t.bio.id,"/fans")},r.a.createElement("div",{className:"nav-field"}," Fans ")),r.a.createElement(b.b,{to:"/profile/".concat(t.bio.id,"/wishlist")},r.a.createElement("div",{className:"nav-field"}," Wishlist "))))})),F=function(e){var t=e.user,a=e.currentUserId,n=t.bio;return t?r.a.createElement(r.a.Fragment,null,a===t.bio.id?r.a.createElement(b.b,{to:"/edit/".concat(t.bio.id)},r.a.createElement("img",{src:"https://i.imgur.com/BvhVhb3.jpg",className:"nav-icon right",alt:"settings"})):"",r.a.createElement("div",{className:"profile-bio-container"},r.a.createElement("div",{className:"profile-bio-info"},r.a.createElement("div",{className:"blockquote-wrapper"},r.a.createElement("div",{className:"blockquote"},r.a.createElement("h1",null,n.description))),r.a.createElement("div",{className:"flex"},r.a.createElement("img",{src:n.profile_image,className:"bio-img"}),r.a.createElement("div",null,r.a.createElement("h1",null," ",n.first_name," ",n.last_name),r.a.createElement("h2",null," @",n.username," "),r.a.createElement("h2",null," ",n.tagline),r.a.createElement("br",null),r.a.createElement("h2",null,"Age: ",n.age),r.a.createElement("h2",null,"Career status: ",n.career),r.a.createElement("h2",null,"Relationship: ",n.relationship),r.a.createElement("h2",null,"Location: ",n.location," ")))))):""},A=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={settings:!1},e.toggleSettings=function(){e.setState({settings:!e.state.settings})},e.deletePost=function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.delete("/api/post/".concat(a,"/"),w());case 2:e.props.updateProfile(e.props.user.bio.id);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.post,n=t.currentUserId,c=this.state.settings;return r.a.createElement("div",{className:"settings-icon flex"},a.owner.id===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex dots-container",onClick:this.toggleSettings},r.a.createElement("div",{className:"dots"}),r.a.createElement("div",{className:"dots"}),r.a.createElement("div",{className:"dots"})),r.a.createElement("div",{onClick:function(){e.deletePost(a.id)},className:c?"post-delete button pointer":"display-none"},r.a.createElement("p",null,"Delete"))):"")}}]),a}(r.a.Component),R=function(e){var t=e.post,a=e.showComments,n=e.updateProfile,c=e.currentUserId,s=e.user,l=e.showRatings;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"post-view flex"},r.a.createElement(b.b,{to:"/profile/".concat(t.owner.id,"/activity")},r.a.createElement("img",{className:"post-icon",alt:"post-owner-pic",src:t.owner.profile_image?t.owner.profile_image:x,onClick:function(){n(t.owner.id)}})),r.a.createElement("div",{className:"full-width"},r.a.createElement("h1",null," ",t.owner.first_name," ",t.owner.last_name),r.a.createElement("div",{className:"flex post-settings"},r.a.createElement("p",{className:"date-text"},t.created_at.split("-").reverse().join(" ")),r.a.createElement(A,{post:t,currentUserId:c,user:s,updateProfile:n})),r.a.createElement("p",{className:"post-content italic"},t.content),r.a.createElement("img",{src:t.image,className:"post-image"}),r.a.createElement("div",{className:"post-interactions"},r.a.createElement("small",{className:"button pointer comment-button",onClick:function(){l(t.ratings)}},"rated by ",t.ratings.length),r.a.createElement("small",{onClick:a,className:"button pointer comment-button"},"Comments (",t.comments?t.comments.length:null,")")))))},M=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={form:{content:""}},e.handleChange=function(t){var a,n=Object(m.a)({},e.state.form,(a={},Object(i.a)(a,t.target.name,t.target.value),Object(i.a)(a,"post",e.props.id),a));e.setState({form:n})},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r,c,s,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.props.page,t.prev=2,"thread"!==n){t.next=12;break}return r=null===e.props.parent?0:e.props.parent,c=e.props.forum,console.log(c),t.next=9,v.a.post("/api/forum/".concat(c.id,"/").concat(r,"/"),e.state.form,w());case 9:e.props.getComments(),e.props.toggleReply(),e.props.toggleReplies(!0);case 12:if("profile"!==n){t.next=18;break}return s=e.props.post.owner.id,l=e.props.post.id,t.next=17,v.a.post("/api/comments/".concat(s,"/").concat(l,"/"),e.state.form,w());case 17:e.props.updateProfile(e.props.user.bio.id);case 18:e.setState({form:{content:""}}),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"bordered-box make-comment center"},r.a.createElement("input",{name:"content",className:"comment-input dark-border",placeholder:"Post a comment",onChange:this.handleChange,value:this.state.form.content}),r.a.createElement("button",{className:"button comment-button italic"}," Comment")))}}]),a}(r.a.Component),q=y(),L=function(e){var t=e.comment,a=e.updateProfile,n=e.user,c=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("/api/comments/".concat(t.id,"/"),w());case 2:a(n.bio.id);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{key:t.id,className:"post-comments dark-border flex"},r.a.createElement("img",{className:"small-icon",src:t.comment_owner.profile_image?t.comment_owner.profile_image:x,alt:"commenter-img"}),r.a.createElement("div",{className:"full-width "},r.a.createElement("div",{className:"comment-content"},r.a.createElement("p",null,t.content),t.comment_owner.id===q?r.a.createElement("small",{className:"pointer",onClick:c},"Delete"):""),r.a.createElement("div",{className:"comment-details"},r.a.createElement("small",null,t.comment_owner.username," "),r.a.createElement("small",null,t.created_at.split("-").reverse().join(" ")))))},T=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={rating:0,message:!1},e.handleChange=function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({rating:a},Object(u.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.post.owner.id,n=e.props.post.id,t.next=4,v.a.post("/api/postratings/".concat(n,"/").concat(a,"/"),e.state,w());case 4:e.props.updateProfile(e.props.user.bio.id,"average"),e.props.updateProfile(e.props.user.bio.id,"posts");case 6:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showText=function(){e.setState({message:!0}),setTimeout((function(){return e.setState({message:!1})}),1e3)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.currentUserId,n=t.ratings.reduce((function(e,t){return e+t.rating}),0)/t.ratings.length,c=t.ratings.some((function(e){return e.rating_owner.id===a})),s=a===t.owner.id?this.showText:c?null:this.handleChange;return r.a.createElement("div",{className:"flex column"},r.a.createElement(C.a,{value:this.state.rating?this.state.rating:n,size:"12px",onChange:s}),r.a.createElement("p",{className:this.state.message?"shake-text italic":"display-none"}," \u24d8 You cannot rate yourself"))}}]),a}(r.a.Component),W=function(e){var t=e.showRatings,a=e.ratingModal,n=e.ratingPop,c=e.updateProfile;return r.a.createElement("div",{className:a?"modal center ":"display-none",onClick:t},r.a.createElement("div",{className:"modal-pop ratings-modal"},r.a.createElement("h1",{className:"bordered-box"},"Post Ratings"),a?n.map((function(e){return r.a.createElement("div",{key:e.id,onClick:function(){return c(e.rating_owner.id)}},r.a.createElement(b.b,{to:"/profile/".concat(e.rating_owner.id,"/activity"),className:" center bordered-box flex"},r.a.createElement("img",{className:"small-icon",alt:"profile-img",src:e.rating_owner.profile_image}),r.a.createElement("p",null,e.rating_owner.first_name," ",e.rating_owner.last_name," rated this post ",e.rating," stars")))})):""))},V=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={comments:!1,ratingModal:!1,ratingPop:""},e.showComments=function(){e.setState({comments:!e.state.comments})},e.showRatings=function(t){t&&e.setState({ratingPop:t}),e.setState({ratingModal:!e.state.ratingModal})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.post,a=e.currentUserId,n=e.updateProfile,c=e.user,s=this.state,l=s.comments,o=s.ratingModal,i=s.ratingPop;return r.a.createElement("div",{className:"posts"},r.a.createElement("div",{className:"post-stars"},r.a.createElement(T,{post:t,user:c,updateProfile:n,currentUserId:a})),r.a.createElement(R,{post:t,user:c,updateProfile:n,showRatings:this.showRatings,showComments:this.showComments,currentUserId:a}),r.a.createElement("div",{className:l?"display-block":"display-none"},t.comments?t.comments.map((function(e){return r.a.createElement(L,{key:e.id,comment:e,user:c,updateProfile:n,page:"profile"})})):null,r.a.createElement(M,{post:t,updateProfile:n,user:c,page:"profile"})),r.a.createElement(W,{ratingPop:i,ratingModal:o,showRatings:this.showRatings,updateProfile:n}))}}]),a}(r.a.Component),B=Object(E.f)(V),z=a(34),Q=a.n(z),Y=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(Q.a,{type:"Puff",color:"#ce9b8e",height:100,width:80})}}]),a}(r.a.Component),J="https://api.cloudinary.com/v1_1/diyxyp4qk/image/upload",H=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={formData:{image:""},loading:!1},e.toggleLoad=function(){e.setState({loading:!e.state.loading})},e.handleUpload=function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.toggleLoad(),(n=new FormData).append("file",a.target.files[0]),n.append("upload_preset","eceecv3s"),t.next=6,v.a.post(J,n);case 6:r=t.sent,e.setState({formData:{image:r.data.url}},Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("edit"===e.props.page&&e.props.image(r.data.url),"post"===e.props.page&&(e.props.post(r.data.url),e.props.toggleImg()),"forum"===e.props.page&&e.props.image(r.data.url,e.props.field),"photos"!==e.props.page){t.next=7;break}return t.next=6,v.a.post("/api/photos/",e.state.formData,w());case 6:e.props.updateProfile(e.props.user.bio.id,"photos");case 7:e.toggleLoad();case 8:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.loading;return r.a.createElement("div",{className:"flex"},r.a.createElement("input",{name:"image",className:"img-up bordered-box dark-border",type:"file",onChange:this.handleUpload}),e?r.a.createElement(Y,null):null)}}]),a}(r.a.Component),G=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={form:{content:""},image:!1},e.handleChange=function(t){var a=Object(m.a)({},e.state.form,Object(i.a)({},t.target.name,t.target.value));e.setState({form:a})},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.props.page,t.prev=2,"thread-post"!==n){t.next=8;break}return r=e.props.threadId,t.next=7,v.a.post("/api/forum/".concat(r,"/0/"),e.state.form,w());case 7:e.props.getComments();case 8:if("profile-post"!==n){t.next=12;break}return t.next=11,v.a.post("/api/post/".concat(e.props.user.bio.id,"/"),e.state.form,w());case 11:e.props.updateProfile(e.props.user.bio.id);case 12:e.setState({form:{content:""}}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}(),e.toggleImage=function(){e.setState({image:!e.state.image})},e.handleImage=function(t){var a=Object(m.a)({},e.state.form,{image:t});e.setState({form:a})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.image;return r.a.createElement("div",{className:"make-post-container  dark-border"},r.a.createElement("form",{className:"post-form center",onSubmit:this.handleSubmit},r.a.createElement("textarea",{className:"post-texarea dark-border",placeholder:"What's happening?",name:"content",onChange:this.handleChange,value:this.state.form.content}),r.a.createElement("div",{className:"center"},r.a.createElement("button",{className:"post-button button"}," Send!"),r.a.createElement("img",{src:"https://i.imgur.com/WPwXvQU.jpg",className:"camera-button",onClick:this.toggleImage}))),r.a.createElement("div",{className:e?"flex-end":"display-none"},r.a.createElement(H,{page:"post",post:this.handleImage,toggleImg:this.toggleImage})))}}]),a}(r.a.Component),K=function(e){var t=e.user;return r.a.createElement("section",{className:"profile-interactions dark-border italic sticky"},r.a.createElement("div",{className:"sticky int-h1"}," ",r.a.createElement("h1",null," Interactions")," "),r.a.createElement("div",{className:"scroll"},t.ratings.map((function(e){return r.a.createElement("div",{key:e.id,className:"posts-interactions dark-border flex"},r.a.createElement("img",{src:e.owner.profile_image?e.owner.profile_image:x,className:"small-icon",alt:"profile-pic"}),r.a.createElement("p",null," ","".concat(e.owner.username," \n              rated ").concat(t.bio.username,"\n              ").concat(e.rating," stars ")," "))}))))},X=function(e){var t=e.user,a=e.currentUserId,n=e.updateProfile,c=e.modal,s=e.handleModal,l=t.posts;return l?r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{page:"profile-post",updateProfile:n,user:t}),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:" profile-posts bordered-box"},l.slice(0).reverse().map((function(e){return r.a.createElement(B,{key:e.id,modal:c,handleModal:s,post:e,currentUserId:a,updateProfile:n,user:t})}))),r.a.createElement("div",{className:"sticky"},r.a.createElement(K,{user:t})))):""},Z=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={image:"",i:"",gallery:!1,loading:!1},e.openImage=function(t,a){a+=1,t&&a?e.setState({image:t,i:a,gallery:!0}):e.setState({gallery:!e.state.gallery})},e.dontCloseModal=function(t){t.stopPropagation(),e.setState({gallery:!0})},e.deleteImg=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.delete("/api/photos/".concat(e.state.image.id,"/"),w());case 2:e.openImage(),e.props.updateProfile(e.props.user.bio.id,"photos");case 4:case"end":return t.stop()}}),t)}))),e.handleImage=function(t){var a,n;"next"===t?(n=e.state.i+1,a=e.props.user.photos[n],e.props.user.photos[n]||(n=0,a=e.props.user.photos[0])):(n=e.state.i-1,a=e.props.user.photos[n],e.props.user.photos[n]||(n=e.props.user.photos.length-1,a=e.props.user.photos[0])),e.setState({image:a,i:n})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.updateProfile,n=t.currentUserId,c=t.user,s=c.photos,l=this.state,o=l.image,i=l.gallery;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,c.bio.first_name,"'s Photos"),n===c.bio.id?r.a.createElement(H,{page:"photos",user:c,updateProfile:a}):"",r.a.createElement("div",{onClick:this.openImage,className:"modal center\n          ".concat(i?"":"display-none")},r.a.createElement("div",{onClick:this.dontCloseModal,className:"gallery-container "},r.a.createElement("button",{className:"gallery-button",onClick:function(){e.handleImage("prev")}}," ","<<<"," "),r.a.createElement("img",{src:o.image,className:"gallery-image",alt:"user-img"}),r.a.createElement("img",{onClick:this.deleteImg,src:"https://i.imgur.com/ptmQbO9.jpg",className:"img-settings",alt:"delete-img"}),r.a.createElement("button",{className:"gallery-button",onClick:function(){e.handleImage("next")}}," ",">>>"," "))),r.a.createElement("div",{className:"profile-photos bordered-box dark-border"},s?s.map((function(t,a){return r.a.createElement("div",{key:t.id,onClick:function(){e.openImage(t,a)},className:"users-photos",style:{backgroundImage:"url(".concat(t.image,")")}})})):""))}}]),a}(r.a.Component),$=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={fbutton:!1},e.handleButton=function(){e.setState({fbutton:!e.state.fbutton})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.fbutton,t=this.props,a=t.getData,n=t.user,c=n.follow,s=c.followers,l=c.following,o=e?"Followers":"Following";return s?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.handleButton,className:"button right"},o," "),r.a.createElement("h1",null," ",n.bio.first_name,"'s ",o," "),r.a.createElement("div",{className:"followers-container flex center-text full-width"},e?r.a.createElement(r.a.Fragment,null,s.map((function(e){return r.a.createElement(b.b,{to:"/profile/".concat(e.user_from.id,"/activity"),key:e.id},r.a.createElement("div",{className:"follow-field dark-border",onClick:function(){a(e.user_from.id)}},r.a.createElement("div",{className:"follow-pic",style:{backgroundImage:"url(".concat(e.user_from.profile_image?e.user_from.profile_image:x,")")}}),r.a.createElement("h1",{className:"italic"},e.user_from.first_name," ",e.user_from.last_name),r.a.createElement("small",null,"Friends since ",e.created.split("-").reverse().join(" "))))}))):r.a.createElement(r.a.Fragment,null,l.map((function(e){return r.a.createElement(b.b,{to:"/profile/".concat(e.user_to.id,"/activity"),key:e.id},r.a.createElement("div",{className:"follow-field dark-border",onClick:function(){a(e.user_to.id)}},r.a.createElement("div",{className:"follow-pic",style:{backgroundImage:"url(".concat(e.user_to.profile_image?e.user_to.profile_image:x,")")}}),r.a.createElement("h1",{className:"italic"},e.user_to.first_name," ",e.user_to.last_name),r.a.createElement("small",null,"Friends since ",e.created.split("-").reverse().join(" "))))}))))):""}}]),a}(r.a.Component),ee=function(e){var t=e.handleChange,a=e.handleSubmit,n=e.search,c=e.user,s=e.currentUserId;return r.a.createElement(r.a.Fragment,null,s===c.bio.id?r.a.createElement("form",{className:"post-form bordered-box dark-border center",onSubmit:a},r.a.createElement("textarea",{className:"post-texarea dark-border",placeholder:"What's happening?",name:"search",onChange:t,value:n}),r.a.createElement("br",null),r.a.createElement("button",{className:"dark-border post-button button"},"Send!")):"")},te=function(e){var t=e.product,a=e.search,n=e.handleWishList,c=e.handleDelete,s=e.currentUserId,l=e.user;return r.a.createElement("div",{className:"product-field dark-border"},r.a.createElement("div",{className:"product-img-container"},r.a.createElement("img",{src:t.thumbnail,className:"product-photo",alt:"product-pic"})),r.a.createElement("a",{href:t.url},r.a.createElement("h1",null,t.title),r.a.createElement("p",null,t.price.current_price?"\xa3".concat(t.price.current_price):null)),s===l.bio.id?!0===a?r.a.createElement("button",{className:"wishlist-button button",onClick:function(){n(t.price.current_price,t.thumbnail,t.url,t.title)}}," Add to Wishlish "):r.a.createElement("button",{className:"wishlist-button button",onClick:function(){c(t.id)}}," Delete "):"")},ae=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={products:[],form:{search:""},postForm:{content:"",image:"",url:"",title:"",price:""},wishlist:[],modal:!1,loading:!1},e.handleChange=function(t){var a=Object(m.a)({},e.state.form,Object(i.a)({},t.target.name,t.target.value));e.setState({form:a})},e.handleSubmit=function(t){t.preventDefault(),e.setState({loading:!0},Object(u.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v()("".concat(O).concat(e.state.form.search),j);case 3:a=t.sent,n=a.data.products,e.setState({products:n,form:{search:""},loading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))))},e.handleWishList=function(){var t=Object(u.a)(o.a.mark((function t(a,n,r,c){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=10*e.props.user.average,a>s?e.setState({modal:"Your rating is not high enough for this action"}):e.setState({postForm:{price:a,thumbnail:n,url:r,title:c}},Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.post("/api/wishlist/",e.state.postForm,w());case 2:e.setState({modal:"Item Added to Wishlist"});case 3:case"end":return t.stop()}}),t)})))),e.props.updateProfile(e.props.user.bio.id,"wishlist");case 3:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),e.handleDelete=function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.delete("/api/wishlist/".concat(a,"/"),w());case 2:e.props.updateProfile(e.props.user.bio.id,"wishlist");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleModal=function(){e.setState({modal:!e.state.modal})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.products,n=t.modal,c=t.search,s=t.loading,l=this.props,o=l.user,i=l.currentUserId,m=o.wishlist;return m?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"wishlist-section scroll"},r.a.createElement("h1",null,o.bio.first_name,"'s Wishlist"),r.a.createElement(ee,{user:o,currentUserId:i,handleChange:this.handleChange,handleSubmit:this.handleSubmit,search:c}),!0===s?r.a.createElement("div",{className:"center wish-loader"},r.a.createElement(Y,null)):null,r.a.createElement("div",{className:"products-container flex"},a.map((function(t){return r.a.createElement(te,{key:t.asin,handleWishList:e.handleWishList,product:t,search:!0,user:o,currentUserId:i})})),m.map((function(t){return r.a.createElement(te,{key:t.asin,handleWishList:e.handleWishList,product:t,search:!1,handleDelete:e.handleDelete,user:o,currentUserId:i})})),r.a.createElement("div",{onClick:this.handleModal,className:"modal center \n          ".concat(n?"display-block":"display-none")},r.a.createElement("div",{className:"modal-pop"},this.state.modal))))):""}}]),a}(r.a.Component),ne=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getData(this.props.match.params.id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.user,a=e.getData,n=e.currentUserId;return t.bio?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sticky profile-head"},r.a.createElement(P,{user:t,currentUserId:n,updateProfile:a}),r.a.createElement(U,{user:t})),r.a.createElement("div",{className:"profile-section full-width"},r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/profile/:id/bio",render:function(){return r.a.createElement(F,{user:t,currentUserId:n})}}),r.a.createElement(E.a,{path:"/profile/:id/activity",render:function(){return r.a.createElement(X,{user:t,currentUserId:n,updateProfile:a})}}),r.a.createElement(E.a,{path:"/profile/:id/photos",render:function(){return r.a.createElement(Z,{user:t,currentUserId:n,updateProfile:a})}}),r.a.createElement(E.a,{path:"/profile/:id/fans",render:function(){return r.a.createElement($,{user:t,getData:a})}}),r.a.createElement(E.a,{path:"/profile/:id/wishlist",render:function(){return r.a.createElement(ae,{user:t,currentUserId:n,updateProfile:a})}})))):null}}]),a}(r.a.Component),re=Object(E.f)(ne),ce=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={profile:{profile_image:""},image:""},e.getData=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("/api/profile/".concat(e.props.currentUserId,"/bio/"));case 2:a=t.sent,console.log(a),e.setState({profile:a.data.bio});case 5:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){try{var a=Object(m.a)({},e.state.profile,Object(i.a)({},t.target.name,t.target.value));e.setState({profile:a})}catch(n){console.log(n)}},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,v.a.put("/api/profile/".concat(e.props.currentUserId,"/edit/"),e.state.profile,w());case 4:e.props.history.push("/profile/".concat(e.props.currentUserId,"/bio")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e.handleImage=function(t){var a=Object(m.a)({},e.state.profile,{profile_image:t});e.setState({profile:a})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getData();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.profile;return console.log(this.state),e?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"auth-form"},r.a.createElement("h1",null,"Edit Profile")),r.a.createElement("div",{className:"auth-form edit-cont pop-up"},r.a.createElement("div",{className:"center"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(e.profile_image,")")},className:" profile-image edit-img"})),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"First Name"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",id:"edit-input",name:"first_name",value:e.first_name,onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Second Name"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",id:"edit-input",name:"last_name",value:e.last_name,onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Profile Image"),r.a.createElement("br",null),r.a.createElement(H,{page:"edit",image:this.handleImage})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Tagline"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",id:"edit-input",name:"tagline",value:e.tagline,onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Description"),r.a.createElement("br",null),r.a.createElement("textarea",{className:"form-input long-textarea ",id:"edit-input",name:"description",value:e.description,onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Career"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",id:"edit-input",name:"career",value:e.career,onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Location"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",id:"edit-input",name:"location",value:e.location,onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Relationship : "),r.a.createElement("select",{defaultValue:e.relationship,onChange:this.handleChange,name:"Relationship"},r.a.createElement("option",{value:"",disabled:!0}),r.a.createElement("option",{value:"Single"},"Single"),r.a.createElement("option",{value:"Relationship"},"In a Relationship"),r.a.createElement("option",{value:"Complicated"},"Complicated"),r.a.createElement("option",{value:"Widowed"},"Widowed"),r.a.createElement("option",{value:"Engaged"},"Engaged"))),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Age"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",id:"edit-input",name:"age",value:e.age,onChange:this.handleChange})),r.a.createElement("button",{className:"form-button button"}," Save! ")))):null}}]),a}(r.a.Component),se=Object(E.f)(ce),le=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={query:"",users:[],searchUsers:[]},e.handleChange=function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:""!==(n=a.target.value)?(r=e.state.users.filter((function(e){var t=new RegExp(n,"i");return e.first_name.match(t)||e.last_name.match(t)})),e.setState({searchUsers:r,query:n})):e.setState({searchUsers:[],query:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeProfile=function(t){e.props.getData(t),e.setState({query:"",searchUsers:[]})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/profile/".concat(this.props.currentUserId,"/all/"));case 2:t=e.sent,this.setState({users:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.query,n=t.searchUsers;return r.a.createElement("div",{className:"search-bar flex"},r.a.createElement("form",{className:"flex center"},r.a.createElement("input",{className:"search-input dark-border",onChange:this.handleChange,value:a}),r.a.createElement("button",{className:"button"}," Search")),r.a.createElement("div",{className:"results-container side-results"},n.map((function(t){return r.a.createElement(b.b,{key:t.id,to:"/profile/".concat(t.id,"/activity")},r.a.createElement("div",{className:"side-user dark-border pointer flex",onClick:function(){e.changeProfile(t.id)}},r.a.createElement("img",{src:t.profile_image,className:"small-icon",alt:"pp-img"}),r.a.createElement("p",null," ",t.first_name," ",t.last_name)))}))))}}]),a}(r.a.Component),oe=Object(E.f)(le),ie=function(e){var t=e.posts;return t?r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("div",{key:e.id,className:"sidebar-post-field"},r.a.createElement("h1",null,e.owner.first_name," ",e.owner.last_name),r.a.createElement("p",null,e.content),r.a.createElement("p",null," ",1===e.ratings.length?"".concat(e.ratings.length," PERSON RATED THIS POST"):"".concat(e.ratings.length," PEOPLE RATED THIS POST")," "))}))):""},me=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleLogout=function(){localStorage.removeItem("token"),e.props.history.push("/login"),window.location.reload()},e.handleProfileNav=function(){e.props.getData(e.props.currentUserId)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.currentUserId;return r.a.createElement("div",{className:"navbar"},r.a.createElement(b.b,{to:"/profile/".concat(this.props.currentUserId,"/activity"),onClick:this.handleProfileNav},r.a.createElement("img",{src:"https://bit.ly/3h8vdNh",className:"nav-icon",alt:"user-profile"})),r.a.createElement(b.b,{to:"/home/".concat(e)},r.a.createElement("img",{src:"https://i.imgur.com/kkeEHVw.jpg",className:"nav-icon",alt:"home"})),r.a.createElement(b.b,{to:"/community"},r.a.createElement("img",{src:"https://i.imgur.com/ZNxb6AE.jpg",className:"nav-icon",alt:"community"})),r.a.createElement(b.b,{to:"/messages"},r.a.createElement("img",{src:"https://i.imgur.com/9caQtx2.jpg",className:"nav-icon",alt:"messages"})),r.a.createElement(b.b,{to:"/stats/".concat(e)},r.a.createElement("img",{src:"https://i.imgur.com/rr5afgV.jpg",className:"nav-icon",alt:"stats"})),r.a.createElement(b.b,{to:"/edit/".concat(e)},r.a.createElement("img",{src:"https://i.imgur.com/BvhVhb3.jpg",className:"nav-icon",alt:"user-profile"})),r.a.createElement("img",{onClick:this.handleLogout,src:"https://i.imgur.com/fgiTuvG.jpg",className:"nav-icon",alt:"user-profile"}))}}]),a}(r.a.Component),ue=Object(E.f)(me),pe=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={newPosts:[],topPosts:[]},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/post/");case 2:t=e.sent,this.setState({newPosts:t.data.new_posts,topPosts:t.data.top_posts});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.newPosts,a=e.topPosts,n=this.props,c=n.getData,s=n.currentUserId;n.changeProfile;return t&&a?r.a.createElement("div",{className:"sidebar-container"},r.a.createElement("section",{className:"sidebar"},r.a.createElement("img",{src:"https://bit.ly/2MMLjiE",className:"sidebar-logo ",alt:"logo"}),r.a.createElement(ue,{currentUserId:s,getData:c}),r.a.createElement(oe,{currentUserId:s,getData:c}),r.a.createElement("h1",{className:"sidebar-title"}," New Posts"),r.a.createElement("div",{className:"sidebar-section"},r.a.createElement(ie,{posts:t})),r.a.createElement("h1",{className:"sidebar-title"}," Top Posts"),r.a.createElement("div",{className:"sidebar-section"},r.a.createElement(ie,{posts:a})))):""}}]),a}(r.a.Component),de=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={formData:{},color:!1},e.handleChange=function(t){try{var a=Object(m.a)({},e.state.formData,Object(i.a)({},t.target.name,t.target.value));e.setState({formData:a,error:""})}catch(n){console.log(n)}},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,v.a.post("/api/login/",Object(m.a)({},e.state.formData));case 4:n=t.sent,N(n.data.token),e.props.history.push("/profile/".concat(y(),"/activity")),window.location.reload(!1),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),e.setState({error:"Invalid Credentials"});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChangeColor=function(){e.setState({color:!e.state.color}),e.timer=setInterval(e.changeback,500)},e.changeback=function(){e.setState({color:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.timer=setInterval(this.handleChangeColor,100)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.state.color?"display-block":"display-none";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"changing-bg  ".concat(e)}),r.a.createElement("img",{src:"https://i.imgur.com/KC7u7fn.jpg",className:"auth-logo center",alt:"logo"}),r.a.createElement("div",{className:"auth-form center pop-up"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-field"},r.a.createElement("h1",null,"Log in"),r.a.createElement("input",{className:"form-input",placeholder:" Username",name:"username",onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("input",{className:"form-input",type:"password",placeholder:" Password",name:"password",onChange:this.handleChange})),r.a.createElement("button",{className:"form-button button"}," Login "),r.a.createElement(b.b,{to:"/register"}," ",r.a.createElement("p",null,"Register .....here")))))}}]),a}(r.a.Component),fe=Object(E.f)(de),he=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={formData:{}},e.handleChange=function(t){try{var a=Object(m.a)({},e.state.formData,Object(i.a)({},t.target.name,t.target.value));e.setState({formData:a})}catch(n){console.log(n)}},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,v.a.post("/api/register/",Object(m.a)({},e.state.formData));case 4:e.props.history.push("/login"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:"https://i.imgur.com/QEUu6V8.jpg",className:"auth-logo center",alt:"logo"}),r.a.createElement("div",{className:"auth-form center pop-up"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Register"),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"First Name"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",placeholder:"First name",name:"first_name",onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Last name"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",placeholder:"Last name",name:"last_name",onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Username"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",placeholder:"username",name:"username",onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Email"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",placeholder:"Email",name:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Password"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",type:"password",placeholder:"password",name:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Password Confirmation"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",type:"password",placeholder:"password confirmation",name:"password_confirmation",onChange:this.handleChange})),r.a.createElement("button",{className:"form-button button"}," Register Now "),r.a.createElement(b.b,{to:"/login"}," ",r.a.createElement("p",null,"Already a member?")))))}}]),a}(r.a.Component),ge=a(21),ve=a.n(ge),be=function(e){var t=e.advice,a=e.weakness,n=e.handleModal,c=e.modal?"display-block":"display-none";return r.a.createElement("div",{className:"modal center ".concat(c),onClick:n},r.a.createElement("div",{className:"advice-container"},r.a.createElement("h1",null,"Advice Slip"),r.a.createElement("br",null),r.a.createElement("p",null,"Your feedback suggests that your weakest attribute is :",r.a.createElement("span",{className:"large-text"},a),r.a.createElement("br",null),"You should consider",r.a.createElement("span",{className:"large-text"},r.a.createElement("a",{href:t}," these resources ")),"to better fit into society ")))},Ee=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={dateOptions:{colors:["#b38282"],chart:{id:"basic-line"},xaxis:{categories:[]}},dateSeries:[{name:"",data:[]}],feedbackOptions:{colors:["#b38282"],chart:{id:"basic-bar"},xaxis:{categories:[]}},feedbackSeries:[{name:"",data:[]}],feedback:[],weakness:"",advice:"",modal:!1},e.getAdvice=function(){var t,a=e.state.feedback.reduce((function(e,t){return e.rating_count>t.rating_count?e:t}));switch(a.feedback){case"Impoverished Vibes":t="https://bit.ly/3ffWg8B",console.log("here");break;case"Unattractive":t="https://bit.ly/2znjGJS";break;case"Unpleasant Smell":t="https://bit.ly/37kknQK";break;case"Rude Interaction":case"Disciminatory":t="https://bit.ly/3dWXzJe";break;default:t="google.com"}e.setState({weakness:a.feedback,advice:t},(function(){e.handleModal()}))},e.handleModal=function(){e.setState({modal:!e.state.modal})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n,r,c,s,l,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],n=[],r=[],e.next=6,v.a.get("/api/ratings/stats/".concat(y(),"/"));case 6:(c=e.sent).data.date.map((function(e){return t.push(e.created_at),a.push(e.rating_count),""})),c.data.feedback.map((function(e){return n.push(e.feedback),r.push(e.rating_count),""})),s=Object(m.a)({},this.state.feedbackOptions,{xaxis:{categories:n}}),l=[Object(m.a)({},this.state.feedbackSeries,{data:r})],i=Object(m.a)({},this.state.dateOptions,{xaxis:{categories:t}}),u=[Object(m.a)({},this.state.series,{data:a})],this.setState({dateOptions:i,dateSeries:u,feedbackOptions:s,feedbackSeries:l,feedback:c.data.feedback}),console.log(c);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button advice-button",onClick:this.getAdvice}," Advice Slip "),r.a.createElement("h1",null," My Ratings Report"),r.a.createElement(be,{advice:this.state.advice,weakness:this.state.weakness,modal:this.state.modal,handleModal:this.handleModal}),r.a.createElement("div",{className:"bordered-box dark-border stats-text"},"Id exercitation officia cupidatat minim velit esse exercitation consequat ad anim veniam labore ut consectetur.Do voluptate sint aliqua eu enim reprehenderit nostrud dolore.Velit quis duis et laborum do occaecat.Sit Lorem incididunt incididunt laboris voluptate amet duis aliquip laborum.Adipisicing pariatur sint qui irure.Aute consequat dolore voluptate deserunt voluptate adipisicing proident ea.Voluptate exercitation ex sint adipisicing.Qui incididunt exercitation ex ex aliquip tempor veniam ea ad qui sunt tempor ad exercitation.Id deserunt consectetur deserunt dolore fugiat culpa non est ea minim consectetur."),r.a.createElement("div",{className:"stats-container flex"},r.a.createElement("div",{className:"graph"},r.a.createElement("h2",{className:"bordered-box dark-border"},"Number of ratings by date"),r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mixed-chart"},r.a.createElement(ve.a,{options:this.state.dateOptions,series:this.state.dateSeries,type:"line",width:window.innerWidth/3}))))),r.a.createElement("div",{className:"graph"},r.a.createElement("h2",{className:"bordered-box dark-border"},"Number by Feedback"),r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mixed-chart"},r.a.createElement(ve.a,{options:this.state.feedbackOptions,series:this.state.feedbackSeries,type:"bar",width:window.innerWidth/3})))))),r.a.createElement("div",{className:"dark-border bordered-box stats-text"},"Id exercitation officia cupidatat minim velit esse exercitation consequat ad anim veniam labore ut consectetur.Do voluptate sint aliqua eu enim reprehenderit nostrud dolore.Velit quis duis et laborum do occaecat.Sit Lorem incididunt incididunt laboris voluptate amet duis aliquip laborum.Adipisicing pariatur sint qui irure.Aute consequat dolore voluptate deserunt voluptate adipisicing proident ea.Voluptate exercitation ex sint adipisicing.Qui incididunt exercitation ex ex aliquip tempor veniam ea ad qui sunt tempor ad exercitation.Id deserunt consectetur deserunt dolore fugiat culpa non est ea minim consectetur. Id exercitation officia cupidatat minim velit esse exercitation consequat ad anim veniam labore ut consectetur.Do voluptate sint aliqua eu enim reprehenderit nostrud dolore.Velit quis duis et laborum do occaecat.Sit Lorem incididunt incididunt laboris voluptate amet duis aliquip laborum.Adipisicing pariatur sint qui irure.Aute consequat dolore voluptate deserunt voluptate adipisicing proident ea.Voluptate exercitation ex sint adipisicing.Qui incididunt exercitation ex ex aliquip tempor veniam ea ad qui sunt tempor ad exercitation.Id deserunt consectetur deserunt dolore fugiat culpa non est ea minim consectetur."))}}]),a}(r.a.Component),Ne=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={formData:{}},e.handleChange=function(t){try{var a=Object(m.a)({},e.state.formData,Object(i.a)({},t.target.name,t.target.value));e.setState({formData:a})}catch(n){console.log(n)}},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,v.a.post("/api/forum/",Object(m.a)({},e.state.formData),w());case 4:e.props.handleModal(),e.props.getData(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleImage=function(t,a){var n=Object(m.a)({},e.state.formData,Object(i.a)({},a,t));e.setState({formData:n})},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"auth-form center pop-up"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",null,"New Thread"),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Title"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",placeholder:"Title",name:"title",onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Description"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-input",placeholder:"Description",name:"description",onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Icon (Optional)"),r.a.createElement(H,{image:this.handleImage,page:"forum",field:"image"})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Limit Acces (Optional)"),r.a.createElement("br",null),r.a.createElement("select",{id:"feedback",className:"form-input",placeholder:"Limit Acces",name:"limitations",onChange:this.handleChange},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"))),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Post"),r.a.createElement("br",null),r.a.createElement("textarea",{className:"form-input",placeholder:"make the first post here!",name:"content",onChange:this.handleChange})),r.a.createElement("div",{className:"form-field"},r.a.createElement("label",{className:"label"},"Post-Image (Optional)"),r.a.createElement(H,{image:this.handleImage,page:"forum",field:"post_image"})),r.a.createElement("button",{className:"form-button button"}," Create New Thread"))))}}]),a}(r.a.Component),we=function(e){var t=e.thread;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.b,{to:"forum/".concat(t.id)},r.a.createElement("div",{key:t.id,className:"forum-thread bordered-box dark-border flex"},r.a.createElement("div",{className:"flex full-width"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(t.image,")")},className:" dark-border forum-icon "}),r.a.createElement("div",{className:"full-width"},r.a.createElement("div",{className:"flex-between"},r.a.createElement("h1",null,t.title),t.limitations?r.a.createElement("p",{className:"thread-limits"}," NO ",t.limitations," STARS ALLOWED "):null),r.a.createElement("p",null,t.description),r.a.createElement("div",{className:"thread-small"},r.a.createElement("p",null,"Created by: ",t.forum_owner.first_name," ",t.forum_owner.last_name," "),r.a.createElement("p",null,"Created at: ",t.created_at))))))):""},ke=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={modal:!1,fButton:!1},e.handleModal=function(){e.setState({modal:!e.state.modal})},e.dontCloseModal=function(t){t.stopPropagation(),e.setState({gallery:!0})},e.toggleFollowed=function(){e.setState({fButton:!e.state.fButton})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.getData(),console.log("called");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.modal,a=e.fButton,n=this.props,c=n.currentUserId,s=n.forum,l=n.followed,o=n.getData,i=t?"display-block":"display-none",m=a?"All-threads":"Followed Threads";return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"bordered-box dark-border"},"Community"),r.a.createElement("div",{className:"bordered-box dark-border"},"Ullamco ipsum pariatur do Lorem eiusmod veniam ut occaecat ad magna in.Deserunt veniam sint et tempor proident fugiat eu ex velit magna.Est consequat sunt laboris minim cupidatat sit et aute proident eu.Irure eiusmod sint aliqua in eiusmod magna.Quis voluptate anim culpa et pariatur mollit do do fugiat aliquip ut.Irure anim irure nisi ex Lorem non fugiat nostrud id id commodo.Adipisicing proident officia duis tempor enim dolor.Eiusmod ipsum anim et ea ut minim laborum adipisicing proident amet sit deserunt ipsum enim.Nulla duis magna pariatur incididunt magna."),r.a.createElement("div",{className:"thread-btn"},r.a.createElement("button",{className:"button",onClick:this.toggleFollowed}," ",m),r.a.createElement("button",{className:"button",onClick:this.handleModal},"+ New thread")),r.a.createElement("div",{className:"".concat(i)},r.a.createElement("div",{onClick:this.handleModal,className:"modal center"},r.a.createElement("div",{onClick:this.dontCloseModal,className:"modal-pop"},r.a.createElement(Ne,{handleModal:this.handleModal,getData:o})))),s[0]?r.a.createElement(r.a.Fragment,null,a?l.map((function(e){return r.a.createElement(we,{currentUserId:c,key:e.id,thread:e})})):s.map((function(e){return r.a.createElement(we,{currentUserId:c,key:e.id,thread:e})}))):"")}}]),a}(r.a.Component),ye=function(e){var t=e.thread;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.b,{to:"/forum/".concat(t.forum.id)},r.a.createElement("div",{className:"news-f-cont bordered-box flex"},r.a.createElement("img",{src:t.forum.image,className:"small-icon",alt:"group-img"}),r.a.createElement("div",null,r.a.createElement("p",{className:"news-f-title"},t.comment_owner.first_name,t.comment_owner.last_name," >>> ",t.forum.title," "),r.a.createElement("p",{className:"news-f-content"},t.content.substring(0,80),"...")))))},xe=function(e){var t=e.user,a=e.average;return t?r.a.createElement("div",{className:"bordered-box feed-bio flex"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(t.bio.profile_image,")")},className:"profile-image"}),r.a.createElement("div",null,r.a.createElement("div",{className:"feed-text center"},r.a.createElement("h1",null,a.toString().slice(0,3),r.a.createElement("small",null,a.toString().slice(3,5))),r.a.createElement("p",null,t.bio.first_name," ",t.bio.last_name),r.a.createElement("p",null,"@",t.bio.username)),r.a.createElement(C.a,{value:a,size:"2vw"}))):null},je=function(e){var t=e.friends;return r.a.createElement("div",{className:"bordered-box italic"},r.a.createElement("h2",{className:"feed-title dark-border"}," Find New Friends"),r.a.createElement("div",{className:"find-cont center"},t?t.map((function(e){return r.a.createElement("div",{key:e.id,className:"friend-cont center  "},r.a.createElement(b.b,{to:"/profile/".concat(e.id,"/activity")},r.a.createElement("div",{style:{backgroundImage:"url(".concat(e.profile_image,")")},className:" friend-icon profile-image "}),r.a.createElement("p",null," ",e.first_name," ",e.last_name),r.a.createElement("p",null,"@",e.username)),r.a.createElement("button",{className:"button follow-button"},"Follow"))})):r.a.createElement("div",null," Follow more users to make more connections ")))},Oe=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={posts:[],forums:[],friends:[]},e.getData=Object(u.a)(o.a.mark((function t(){var a,n,r,c,s,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.currentUserId,t.next=3,v.a.get("/api/profile/".concat(a,"/bio/"));case 3:return n=t.sent,t.next=6,v.a.get("/api/forum/newsfeed/".concat(a,"/"));case 6:return r=t.sent,t.next=9,v.a.get("/api/post/newsfeed/".concat(a,"/"));case 9:return c=t.sent,t.next=12,v.a.get("/api/profile/".concat(a,"/average/"));case 12:return s=t.sent,t.next=15,v.a.get("/api/follow/find/".concat(a,"/"),w());case 15:l=t.sent,e.setState({posts:c.data,forums:r.data,user:n.data,average:s.data.average,friends:l?l.data:null});case 17:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.posts,n=t.forums,c=t.friends,s=t.user,l=t.average,o=this.props.currentUserId;return s?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bordered-box"},r.a.createElement("h2",null,"NewsFeed TEST")),r.a.createElement(G,{page:"profile-post",user:s,updateProfile:this.getData}),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"feed-left"},r.a.createElement(xe,{user:s,average:l}),r.a.createElement("div",{className:"bordered-box feed-forum"},r.a.createElement("h2",{className:"feed-title dark-border"}," New Forums"),n.map((function(e){return r.a.createElement(ye,{key:e.id,thread:e})}))),r.a.createElement(je,{friends:c,user:s})),r.a.createElement("div",{className:"bordered-box feed-post"},r.a.createElement("h2",{className:"feed-title dark-border"}," Newest Posts "),a.slice(0).reverse().map((function(t){return r.a.createElement(B,{user:s,key:t.id,page:"profile-post",post:t,currentUserId:o,updateProfile:e.getData})}))))):null}}]),a}(r.a.Component),Ce=function(e){var t=e.modal,a=e.thread,n=e.owner,c=e.follow,s=e.following,l=e.deleteThread,o=t?"display:block":"display-none";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal blurred center ".concat(o)},r.a.createElement("div",{className:"modal-pop"},r.a.createElement("p",null," ","This thread is private, \n          You need to be a ".concat(a.limitations," star to enter")))),r.a.createElement("div",{className:"bordered-box thread-post flex"},r.a.createElement("div",null,r.a.createElement("img",{src:a.image,className:"thread-img dark-border",alt:"thread-img"}),r.a.createElement("div",{className:"flex"},r.a.createElement("img",{src:n.profile_image,alt:"owner-img",className:"small-icon"}),r.a.createElement("div",null,r.a.createElement("p",null,n.first_name," ",n.last_name),r.a.createElement("p",null,a.created_at)))),r.a.createElement("div",{className:"full-width"},r.a.createElement("div",{className:"right"},r.a.createElement("p",{className:"thread-limits"},a.limitations?"NO ".concat(a.limitations," STARS ALLOWED"):"PUBLIC"," "),r.a.createElement("button",{className:"button",onClick:c},s?"Unfollow":"Follow"," "),r.a.createElement("button",{className:"button",onClick:function(){l(a.id)}},"Delete")),r.a.createElement("h1",null,a.title),r.a.createElement("p",null,a.description),r.a.createElement("p",{className:"bordered-box thread-content"},a.content),a.post_image?r.a.createElement("img",{src:a.post_image,className:"thr-img",alt:"thread-img"}):null,r.a.createElement("p",{className:"right"},a.created_at))))},Se=y(),_e=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={reply:!1},e.toggleReply=function(){e.setState({reply:!e.state.reply})},e.handleDelete=function(){var t=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.delete("/api/forum/".concat(a,"/"),w());case 2:e.props.getComments();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.comment,n=t.getComments,c=t.replies,s=t.toggleReplies;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.state.reply?"display-block":"display-none"},r.a.createElement(M,{forum:a.forum,parent:a.id,page:"thread",getComments:n,toggleReplies:s,toggleReply:this.toggleReply})),r.a.createElement("div",{className:"tcom-options"},r.a.createElement("button",{className:a.children.length>0?"button":"display-none",onClick:function(){s(null)}},c?"Hide...":"Replies..."),r.a.createElement("button",{onClick:this.toggleReply,className:"button"}," Reply"),r.a.createElement("button",{className:a.comment_owner.id===Se?"button":"display-none",onClick:function(){e.handleDelete(a.id)}}," Delete")))}}]),a}(r.a.Component),Ie=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={replies:!1},e.toggleReplies=function(t){t?e.setState({replies:t}):e.setState({replies:!e.state.replies})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.getComments,c=t.comment_owner,s=this.state.replies;return console.log(t),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tcom-top dark-border"},r.a.createElement("p",{className:null===t.parent?"display-none":"right"},"<<<"," ")),r.a.createElement("div",{className:"tcom-contain bordered-box"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"indent center"},r.a.createElement("div",{className:"line"}),r.a.createElement("div",{className:"text"})),r.a.createElement("div",{className:"tcom-info center"},r.a.createElement("img",{alt:"profile-img",className:"small-icon",src:c.profile_image}),r.a.createElement("p",null,c.first_name," ",c.last_name),r.a.createElement("small",null,t.created_at)),r.a.createElement("div",{className:"full-width"},r.a.createElement("div",{className:"bordered-box tcom-cont"},r.a.createElement("p",null,t.content)),r.a.createElement(_e,{comment:t,getComments:n,replies:this.state.replies,toggleReplies:this.toggleReplies}))),r.a.createElement("div",{className:s?"display-block":"display-none"},t.children?t.children.map((function(e){return r.a.createElement(a,{key:e.id,comment:e,getComments:n})})):null)))}}]),a}(r.a.Component),De=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={thread:[],rating:"",modal:!1,owner:"",comments:[],following:""},e.getData=Object(u.a)(o.a.mark((function t(){var a,n,r,c,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.currentUserId,e.getComments(),n=e.props.match.params.id,t.next=5,v.a.get("/api/forum/thread/".concat(n,"/"));case 5:return r=t.sent,t.next=8,v.a.get("/api/profile/".concat(a,"/average/"));case 8:c=t.sent,s=r.data[0].followers.includes(a),e.setState({thread:r.data[0],rating:c.data.average,owner:r.data[0].forum_owner,following:s},(function(){e.state.thread.limitations&&e.state.rating.toString().charAt(0)===e.state.thread.limitations&&e.setState({modal:!0})}));case 11:case"end":return t.stop()}}),t)}))),e.getComments=Object(u.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,v.a.get("/api/forum/".concat(a,"/"));case 3:n=t.sent,e.setState({comments:n.data});case 5:case"end":return t.stop()}}),t)}))),e.followForum=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.thread.id,!e.state.following){t.next=6;break}return t.next=4,v.a.delete("/api/forum/follow/".concat(a,"/"),w());case 4:t.next=8;break;case 6:return t.next=8,v.a.post("/api/forum/follow/".concat(a,"/"),null,w());case 8:e.getData();case 9:case"end":return t.stop()}}),t)}))),e.deleteThread=function(t){v.a.delete("/api/forum/thread/".concat(t,"/"),w()),e.props.getData(),e.props.history.push("/community")},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getData();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.modal,n=t.thread,c=t.owner,s=t.comments,l=t.following,o=this.props.match.params.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{modal:a,thread:n,owner:c,follow:this.followForum,following:l,deleteThread:this.deleteThread}),r.a.createElement(G,{page:"thread-post",threadId:o,getComments:this.getComments}),s.map((function(t){return r.a.createElement(Ie,{key:t.id,comment:t,getComments:e.getComments})})))}}]),a}(r.a.Component),Pe=Object(E.f)(De),Ue=function(e){var t=e.userId,a=e.convo;return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a?" chat-name flex":"display-none"},r.a.createElement("img",{src:a.participants.profile_image,alt:"info-img",className:"small-icon"}),r.a.createElement("h1",null,a.participants.first_name," ",a.participants.last_name," ")),r.a.createElement("div",{className:"chat-messages scroll"},a.messages?a.messages.map((function(e){return e.sender.id===t?r.a.createElement("div",{key:e.id,className:"message-user"},r.a.createElement("p",{className:"message-pop bordered-box"},e.content," "),r.a.createElement("img",{src:e.sender.profile_image,className:"msg-icon small-icon",alt:"pp-img"})):r.a.createElement("div",{key:e.id,className:" message-sender"},r.a.createElement("img",{src:e.sender.profile_image,className:"msg-icon small-icon",alt:"pp-img"}),r.a.createElement("p",{className:"message-pop bordered-box"},e.content," "))})):null)):""},Fe=function(e){var t=e.conv,a=e.setChat,n=e.selectedChat,c=e.setNew,s=e.setRead,l=e.userId,o=function(e){var t=e.filter((function(e){return!1===e.read&&e.reciever.id===l})).length;return 0===t?null:t};return t?r.a.createElement("div",{className:"conv-container bordered-box"},r.a.createElement("button",{onClick:c,className:"button right"},"+ New Chat"),r.a.createElement("h1",{className:"conv-header"}," Conversations"),t.map((function(e,t){return r.a.createElement("div",{key:e.id,className:"flex conv-field \n              ".concat(e.id===n?"selected-chat":""),onClick:function(){s(e.messages),a(t)}},r.a.createElement("img",{src:e.participants.profile_image,alt:"profile-img",className:"small-icon"}),r.a.createElement("div",{className:"full-width flex-between"},r.a.createElement("p",null,e.participants.first_name," ",e.participants.last_name),o(e.messages)?r.a.createElement("div",{className:"center read-notif"},o(e.messages)):null))}))):null},Ae=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={form:{content:"",conversation:""}},e.handleChange=function(t){var a=Object(m.a)({},e.state.form,Object(i.a)({},t.target.name,t.target.value));e.setState({form:a})},e.handleClear=function(){var t=Object(m.a)({},e.state.form,{content:"",conversation:""});e.setState({form:t})},e.handleSubmit=Object(u.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object(m.a)({},e.state.form,{conversation:e.props.convo.id}),n=e.props.convo.participants.id,t.next=5,v.a.post("/api/messaging/".concat(n,"/"),a,w());case 5:return t.next=7,e.props.getConvos();case 7:return t.next=9,e.props.setChat(0,1);case 9:e.handleClear(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.convo;return r.a.createElement("div",{className:e?"msg-post center":"display-none"},r.a.createElement("input",{className:"msg-input",placeholder:"Send a message...",name:"content",onChange:this.handleChange,value:this.state.form.content}),r.a.createElement("button",{onClick:this.handleSubmit,className:"button"}," Send"))}}]),a}(r.a.Component),Re=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={input:"",users:[],searchUsers:[]},e.handleChange=function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:""!==(n=a.target.value)?(r=e.state.users.filter((function(e){var t=new RegExp(n,"i");return e.first_name.match(t)||e.last_name.match(t)})),e.setState({searchUsers:r,input:n})):e.setState({searchUsers:[],input:n});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleNew=function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.conversations,!((r=n.findIndex((function(e){return e.participants.id===a})))>=0)){t.next=6;break}e.props.setChat(r),t.next=12;break;case 6:return t.next=8,v.a.post("/api/conversations/".concat(a,"/"),{userId:e.props.userId});case 8:return t.next=10,e.props.getConvos();case 10:c=n.length,e.props.setChat(c);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.userId,e.next=3,v.a.get("/api/profile/".concat(t,"/all/"));case 3:a=e.sent,this.setState({users:a.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.input,n=t.searchUsers,c=this.props.newConvo;return r.a.createElement("div",{className:c?" newConvo-container ":"display-none"},r.a.createElement("div",{className:"flex center"},r.a.createElement("h1",null," New Chat"),r.a.createElement("img",{className:"search-btn small-icon",src:"https://i.imgur.com/NFkcPiE.jpg",alt:"pp-img"})),r.a.createElement("div",{className:"bordered-box"},r.a.createElement("input",{className:"msg-search",value:a,placeholder:"Search for a user...",onChange:this.handleChange}),r.a.createElement("div",{className:"results-container"},n.map((function(t){return r.a.createElement("div",{key:t.id,className:" search-user pointer flex",onClick:function(){e.handleNew(t.id)}},r.a.createElement("img",{src:t.profile_image,className:"small-icon",alt:"pp-img"}),r.a.createElement("p",null," ",t.first_name," ",t.last_name))})))))}}]),a}(r.a.Component),Me=y(),qe=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={conversations:[],chat:"",convo:"",newConvo:!1},e.getConvos=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("/api/conversations/".concat(Me,"/"));case 2:(a=t.sent).data.map((function(e){return e.participants=e.participants.find((function(e){return e.id!==Me}))})),e.setState({conversations:a.data});case 5:case"end":return t.stop()}}),t)}))),e.setChat=function(){var t=Object(u.a)(o.a.mark((function t(a,n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n?e.state.index:a,e.setState({index:a,newConvo:!1,convo:e.state.conversations[a]});case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.setRead=function(){var t=Object(u.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.map(function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t.read||t.reciever.id!==Me){e.next=4;break}return a=Object(m.a)({},t,{sender:t.sender.id,reciever:t.reciever.id,read:!0}),e.next=4,v.a.put("/api/messaging/".concat(t.id,"/"),a,w());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Promise.all(n).then((function(){e.getConvos()}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setNew=function(){e.setState({newConvo:!e.state.newConvo,convo:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getConvos();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.conversations,a=e.newConvo,n=e.convo;return r.a.createElement("div",{className:"flex"},r.a.createElement(Fe,{conv:t,userId:Me,setChat:this.setChat,setNew:this.setNew,setRead:this.setRead}),r.a.createElement("div",{className:"chat-container"},r.a.createElement(Re,{userId:Me,newConvo:a,conversations:t,handleNew:this.handleNew,setChat:this.setChat,getConvos:this.getConvos}),r.a.createElement(Ue,{userId:Me,convo:n}),r.a.createElement(Ae,{convo:n,getConvos:this.getConvos,setChat:this.setChat})))}}]),a}(r.a.Component),Le=k(),Te=y(),We=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:{},forum:{},followed:[]},e.getData=function(){var t=Object(u.a)(o.a.mark((function t(a,n){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("/api/profile/".concat(a,"/").concat(n||"user","/"));case 2:r=t.sent,c=Object(m.a)({},e.state.user,Object(i.a)({},n,r.data[n])),n?e.setState({user:c}):e.setState({user:r.data});case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.getDataForum=Object(u.a)(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("called"),t.next=3,v.a.get("/api/forum/");case 3:a=t.sent,n=a.data.filter((function(e){return e.followers.includes(Te)})),e.setState({forum:a.data,followed:n});case 6:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.forum,c=t.followed;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null,Le?r.a.createElement(E.a,{render:function(){return r.a.createElement(pe,{user:a,currentUserId:Te,getData:e.getData,changeProfile:e.changeProfile})}}):"",r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/login",component:fe}),r.a.createElement(E.a,{path:"/register",component:he}),r.a.createElement(E.a,{path:"/messages",component:qe}),r.a.createElement("div",{className:"left-section"},r.a.createElement(E.a,{path:"/profile/:id/",render:function(){return r.a.createElement(re,{user:a,currentUserId:Te,getData:e.getData})}}),r.a.createElement(E.a,{path:"/edit",render:function(){return r.a.createElement(se,{currentUserId:Te})}}),r.a.createElement(E.a,{path:"/home/:id",render:function(){return r.a.createElement(Oe,{currentUserId:Te})}}),r.a.createElement(E.a,{path:"/stats/:id",component:Ee}),r.a.createElement(E.a,{path:"/community",render:function(){return r.a.createElement(ke,{currentUserId:Te,getData:e.getDataForum,forum:n,followed:c})}}),r.a.createElement(E.a,{path:"/forum/:id",render:function(){return r.a.createElement(Pe,{currentUserId:Te,getData:e.getDataForum})}})))))}}]),a}(r.a.Component);s.a.render(r.a.createElement(We,null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.bb5829b4.chunk.js.map